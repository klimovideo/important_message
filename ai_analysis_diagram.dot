digraph AIAnalysis {
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥—Ä–∞—Ñ–∞
    rankdir=LR;
    node [shape=box, style=filled, fontname="Arial", fontsize=10];
    edge [fontname="Arial", fontsize=9];
    
    // –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å AI –∞–Ω–∞–ª–∏–∑–∞
    subgraph cluster_ai_process {
        label="üß† –ü—Ä–æ—Ü–µ—Å—Å AI –∞–Ω–∞–ª–∏–∑–∞ –≤–∞–∂–Ω–æ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–π";
        style=filled;
        color=lightblue;
        
        // –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        input_message [label="üì® –í—Ö–æ–¥—è—â–µ–µ\n—Å–æ–æ–±—â–µ–Ω–∏–µ", fillcolor=lightgreen];
        user_prefs [label="üë§ –ù–∞—Å—Ç—Ä–æ–π–∫–∏\n–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è", fillcolor=lightgreen];
        global_config [label="‚öôÔ∏è –ì–ª–æ–±–∞–ª—å–Ω—ã–µ\n–Ω–∞—Å—Ç—Ä–æ–π–∫–∏", fillcolor=lightgreen];
        
        // –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞
        preprocess [label="üîß –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞\n—Å–æ–æ–±—â–µ–Ω–∏—è", fillcolor=lightyellow];
        extract_text [label="üìù –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ\n—Ç–µ–∫—Å—Ç–∞", fillcolor=lightyellow];
        clean_text [label="üßπ –û—á–∏—Å—Ç–∫–∞\n—Ç–µ–∫—Å—Ç–∞", fillcolor=lightyellow];
        
        // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞
        create_prompt [label="üìã –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ\n–ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è –ò–ò", fillcolor=lightyellow];
        prompt_template [label="üìÑ –®–∞–±–ª–æ–Ω\n–ø—Ä–æ–º–ø—Ç–∞", fillcolor=lightcoral];
        
        // AI –∞–Ω–∞–ª–∏–∑
        giga_chat_request [label="ü§ñ –ó–∞–ø—Ä–æ—Å –∫\nGigaChat API", fillcolor=lightcoral];
        giga_chat_response [label="üì§ –û—Ç–≤–µ—Ç –æ—Ç\nGigaChat", fillcolor=lightcoral];
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        parse_response [label="üîç –ü–∞—Ä—Å–∏–Ω–≥\n–æ—Ç–≤–µ—Ç–∞", fillcolor=lightyellow];
        extract_score [label="üìä –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ\n–æ—Ü–µ–Ω–∫–∏", fillcolor=lightyellow];
        
        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤
        apply_criteria [label="‚öñÔ∏è –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ\n–∫—Ä–∏—Ç–µ—Ä–∏–µ–≤", fillcolor=lightyellow];
        check_keywords [label="üîë –ü—Ä–æ–≤–µ—Ä–∫–∞\n–∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤", fillcolor=lightyellow];
        check_source [label="üì¢ –ü—Ä–æ–≤–µ—Ä–∫–∞\n–∏—Å—Ç–æ—á–Ω–∏–∫–∞", fillcolor=lightyellow];
        
        // –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
        final_score [label="‚≠ê –§–∏–Ω–∞–ª—å–Ω–∞—è\n–æ—Ü–µ–Ω–∫–∞ –≤–∞–∂–Ω–æ—Å—Ç–∏", fillcolor=lightgreen];
        decision [label="üéØ –†–µ—à–µ–Ω–∏–µ –æ\n–ø—É–±–ª–∏–∫–∞—Ü–∏–∏", shape=diamond, fillcolor=yellow];
    }
    
    // –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤
    subgraph cluster_criteria {
        label="üìã –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏ –≤–∞–∂–Ω–æ—Å—Ç–∏";
        style=filled;
        color=lightgreen;
        
        keywords_boost [label="üìà –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞\n(–ø–æ–≤—ã—à–∞—é—Ç –≤–∞–∂–Ω–æ—Å—Ç—å)", fillcolor=lightyellow];
        keywords_reduce [label="üìâ –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞\n(—Å–Ω–∏–∂–∞—é—Ç –≤–∞–∂–Ω–æ—Å—Ç—å)", fillcolor=lightyellow];
        source_boost [label="üì¢ –ò—Å—Ç–æ—á–Ω–∏–∫–∏\n(–ø–æ–≤—ã—à–∞—é—Ç –≤–∞–∂–Ω–æ—Å—Ç—å)", fillcolor=lightyellow];
        source_reduce [label="üì¢ –ò—Å—Ç–æ—á–Ω–∏–∫–∏\n(—Å–Ω–∏–∂–∞—é—Ç –≤–∞–∂–Ω–æ—Å—Ç—å)", fillcolor=lightyellow];
        time_sensitivity [label="‚è∞ –í—Ä–µ–º–µ–Ω–Ω–∞—è\n—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å", fillcolor=lightyellow];
        message_length [label="üìè –î–ª–∏–Ω–∞\n—Å–æ–æ–±—â–µ–Ω–∏—è", fillcolor=lightyellow];
    }
    
    // –®–∞–±–ª–æ–Ω –ø—Ä–æ–º–ø—Ç–∞
    subgraph cluster_prompt {
        label="üìÑ –®–∞–±–ª–æ–Ω –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è GigaChat";
        style=filled;
        color=lightyellow;
        
        prompt_example [label="–û—Ü–µ–Ω–∏—Ç–µ –≤–∞–∂–Ω–æ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç 0.0 –¥–æ 1.0:\n\n–°–æ–æ–±—â–µ–Ω–∏–µ: {—Ç–µ–∫—Å—Ç}\n–ò—Å—Ç–æ—á–Ω–∏–∫: {–∏—Å—Ç–æ—á–Ω–∏–∫}\n–í—Ä–µ–º—è: {–≤—Ä–µ–º—è}\n\n–£—á–∏—Ç—ã–≤–∞–π—Ç–µ:\n- –î–µ–ª–æ–≤—É—é –∑–Ω–∞—á–∏–º–æ—Å—Ç—å\n- –°—Ä–æ—á–Ω–æ—Å—Ç—å\n- –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä–∞–±–æ—Ç—É\n- –ö–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–º–ø–∞–Ω–∏–∏", fillcolor=lightcoral];
    }
    
    // –°–≤—è–∑–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
    input_message -> preprocess;
    user_prefs -> preprocess;
    global_config -> preprocess;
    
    preprocess -> extract_text;
    extract_text -> clean_text;
    clean_text -> create_prompt;
    
    create_prompt -> prompt_template;
    prompt_template -> giga_chat_request;
    giga_chat_request -> giga_chat_response;
    giga_chat_response -> parse_response;
    parse_response -> extract_score;
    
    extract_score -> apply_criteria;
    apply_criteria -> check_keywords;
    apply_criteria -> check_source;
    
    check_keywords -> final_score;
    check_source -> final_score;
    
    final_score -> decision;
    
    // –°–≤—è–∑–∏ —Å –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏
    keywords_boost -> check_keywords;
    keywords_reduce -> check_keywords;
    source_boost -> check_source;
    source_reduce -> check_source;
    time_sensitivity -> apply_criteria;
    message_length -> apply_criteria;
    
    // –ü—Ä–∏–º–µ—Ä—ã –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
    subgraph cluster_examples {
        label="üîë –ü—Ä–∏–º–µ—Ä—ã –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤";
        style=filled;
        color=lightpink;
        
        boost_examples [label="üìà –ü–æ–≤—ã—à–∞—é—Ç –≤–∞–∂–Ω–æ—Å—Ç—å:\n‚Ä¢ —Å—Ä–æ—á–Ω–æ, –≤–∞–∂–Ω–æ, –≤—Å—Ç—Ä–µ—á–∞\n‚Ä¢ –¥–µ–¥–ª–∞–π–Ω, –æ—Ç—á–µ—Ç, –ø—Ä–æ–µ–∫—Ç\n‚Ä¢ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ", fillcolor=lightyellow];
        reduce_examples [label="üìâ –°–Ω–∏–∂–∞—é—Ç –≤–∞–∂–Ω–æ—Å—Ç—å:\n‚Ä¢ —Ä–µ–∫–ª–∞–º–∞, —Å–ø–∞–º, —Ç–µ—Å—Ç\n‚Ä¢ —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–µ\n‚Ä¢ –ª–∏—á–Ω–æ–µ, –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ–µ", fillcolor=lightyellow];
    }
    
    boost_examples -> keywords_boost;
    reduce_examples -> keywords_reduce;
    
    // –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
    subgraph cluster_results {
        label="üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞";
        style=filled;
        color=lightblue;
        
        important [label="‚úÖ –í–∞–∂–Ω–æ–µ\n(‚â• 0.7)", fillcolor=lightgreen];
        not_important [label="‚ùå –ù–µ–≤–∞–∂–Ω–æ–µ\n(< 0.7)", fillcolor=lightcoral];
        publish [label="üì¢ –ü—É–±–ª–∏–∫–∞—Ü–∏—è\n–≤ –∫–∞–Ω–∞–ª–µ", fillcolor=lightgreen];
        ignore [label="üö´ –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ", fillcolor=lightcoral];
    }
    
    decision -> important [label="–í–∞–∂–Ω–æ–µ"];
    decision -> not_important [label="–ù–µ–≤–∞–∂–Ω–æ–µ"];
    important -> publish;
    not_important -> ignore;
    
    // –°—Ç–∏–ª–∏ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
    edge [color=blue, penwidth=2];
    input_message -> preprocess;
    giga_chat_request -> giga_chat_response;
    final_score -> decision;
    
    edge [color=green, penwidth=1];
    important -> publish;
    
    edge [color=red, penwidth=1];
    not_important -> ignore;
    
    edge [color=orange, penwidth=1];
    keywords_boost -> check_keywords;
    keywords_reduce -> check_keywords;
    source_boost -> check_source;
    source_reduce -> check_source;
} 