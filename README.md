# Important Message Bot

Telegram бот, который использует ИИ для анализа сообщений из различных чатов и каналов, фильтруя только важные сообщения и пересылая их вам.

## Возможности

- Использует GigaChat AI модели для анализа важности сообщений
- Автоматический мониторинг нескольких чатов и каналов
- Настраиваемый порог важности
- Фильтрация по ключевым словам
- Простая настройка и использование
- Сохранение настроек в JSON базе данных
- Статистика использования

## Требования

- Python 3.8+
- Telegram Bot Token
- GigaChat API Credentials (CLIENT_ID и SECRET)

## Установка

1. Клонируйте репозиторий
2. Установите необходимые пакеты:
   ```
   pip install -r requirements.txt
   ```
3. Создайте файл `.env` в корневой директории со следующим содержимым:
   ```
   TELEGRAM_TOKEN=your_telegram_bot_token
   CLIENT_ID=your_gigachat_client_id
   SECRET=your_gigachat_secret
   ```
   
## Как создать Telegram бота

1. Начните чат с [@BotFather](https://t.me/BotFather) в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания нового бота
4. BotFather даст вам токен для вашего бота - скопируйте его в файл `.env`

## Запуск бота

Запустите бота командой:

```
python main.py
```

## Использование

1. Начните чат с вашим ботом, найдя его по имени пользователя в Telegram
2. Отправьте `/start` для инициализации бота
3. Добавьте бота в чат или канал, который хотите мониторить
4. Перешлите сообщение из этого чата/канала боту
5. Ответьте на это сообщение командой `/monitor`
6. Бот теперь будет автоматически мониторить этот чат/канал и уведомлять вас о важных сообщениях
7. Настройте параметры с помощью команд `/threshold`, `/add_keyword` и т.д.

## Доступные команды

### Основные команды
- `/start` - Запустить бота
- `/help` - Показать справку
- `/settings` - Просмотр текущих настроек
- `/stats` - Показать статистику бота

### Мониторинг
- `/monitor` - Начать мониторинг чата или канала
- `/unmonitor` - Остановить мониторинг чата или канала
- `/list` - Список всех мониторимых чатов и каналов

### Ключевые слова
- `/add_keyword` - Добавить важное ключевое слово
- `/remove_keyword` - Удалить ключевое слово
- `/keywords` - Список всех ваших ключевых слов

### Настройки
- `/threshold` - Установить порог важности (0.0-1.0)
- `/clear_data` - Очистить все ваши данные

## Как это работает

1. Вы добавляете бота в чаты и каналы, которые хотите мониторить
2. Бот автоматически получает все сообщения из этих чатов/каналов
3. Каждое сообщение анализируется с помощью GigaChat API для определения важности
4. Если оценка важности сообщения превышает ваш порог, бот пересылает его вам
5. Вы можете настроить определение важности, добавляя ключевые слова и изменяя порог

## Файлы проекта

- `main.py` - Точка входа в приложение
- `bot.py` - Основная логика Telegram бота
- `ai_service.py` - Интеграция с GigaChat API
- `models.py` - Модели данных и система хранения
- `config.py` - Конфигурация приложения
- `utils.py` - Вспомогательные функции
- `user_preferences.json` - База данных настроек пользователей (создается автоматически)

## Примечания

- Бот должен быть добавлен в чаты/каналы для их автоматического мониторинга
- Для приватных чатов может потребоваться ручная пересылка сообщений
- Использование GigaChat API может требовать соответствующих разрешений и авторизации
- Все настройки пользователей сохраняются в локальном JSON файле
- Логи работы бота записываются в файл `bot.log`

## Безопасность

- Токены и ключи API хранятся в файле `.env` (не коммитьте этот файл в git)
- Все пользовательские данные хранятся локально
- Бот не имеет доступа к содержимому сообщений, которые не пересылаются ему

## Поддержка

При возникновении проблем:
1. Проверьте логи в файле `bot.log`
2. Убедитесь, что все переменные окружения установлены правильно
3. Проверьте подключение к интернету и доступность GigaChat API 