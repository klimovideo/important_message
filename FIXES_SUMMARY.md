# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫

## –ü—Ä–æ–±–ª–µ–º–∞: –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –∫–∞–∫ –Ω–æ–≤—ã–π –ø–æ—Å—Ç

### –ü—Ä–∏—á–∏–Ω–∞
–ë–æ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π. –ö–æ–≥–¥–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–ª —Å—Å—ã–ª–∫—É –Ω–∞ –∫–∞–Ω–∞–ª –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –±–æ—Ç –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–ª –µ—ë –∫–∞–∫ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞.

### –†–µ—à–µ–Ω–∏–µ
1. **–î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `channel_setup`** –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏** –≤ `handle_text_messages`:
   - –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ `channel_setup` –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
   - –ó–∞—Ç–µ–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è userbot —Å—Å—ã–ª–∫–∏
   - –í –∫–æ–Ω—Ü–µ - –æ–±—ã—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `bot.py` - –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## –ü—Ä–æ–±–ª–µ–º–∞: AttributeError –≤ show_channel_config

### –ü—Ä–∏—á–∏–Ω–∞
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ `CallbackQuery` –æ–±—ä–µ–∫—Ç–∞ - –ø–æ–ø—ã—Ç–∫–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ `update.effective_user` –¥–ª—è callback –∑–∞–ø—Ä–æ—Å–æ–≤.

### –†–µ—à–µ–Ω–∏–µ
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è `user_id`:
```python
if hasattr(update, 'callback_query') and update.callback_query:
    user_id = update.callback_query.from_user.id
elif hasattr(update, 'effective_user') and update.effective_user:
    user_id = update.effective_user.id
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `bot.py` - —Ñ—É–Ω–∫—Ü–∏—è `show_channel_config`

---

## –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ datetime –≤ userbot

### –ü—Ä–∏—á–∏–Ω–∞
`message.date` –≤ Pyrogram —É–∂–µ —è–≤–ª—è–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç–æ–º `datetime`, –∞ –Ω–µ timestamp. –ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `datetime.fromtimestamp()` –≤—ã–∑—ã–≤–∞–ª–∞ –æ—à–∏–±–∫—É.

### –†–µ—à–µ–Ω–∏–µ
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ `message.date`:
```python
# –ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
date=datetime.fromtimestamp(message.date) if message.date else datetime.now()

# –°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
date=message.date if message.date else datetime.now()
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `userbot.py` - —Ñ—É–Ω–∫—Ü–∏—è `process_message`

---

## –ü—Ä–æ–±–ª–µ–º–∞: Userbot –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ü—Ä–∏—á–∏–Ω–∞
Userbot –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞, –ø–æ—ç—Ç–æ–º—É –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–º—ã—Ö –∫–∞–Ω–∞–ª–æ–≤.

### –†–µ—à–µ–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ userbot –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `main()`:
```python
# –ó–∞–ø—É—Å–∫–∞–µ–º userbot –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
if USERBOT_ENABLED:
    async def start_userbot_task():
        try:
            await start_userbot()
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ userbot: {e}")
    
    loop = asyncio.get_event_loop()
    loop.create_task(start_userbot_task())
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `bot.py` - —Ñ—É–Ω–∫—Ü–∏—è `main()`

---

## –ü—Ä–æ–±–ª–µ–º–∞: Userbot –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ü—Ä–∏—á–∏–Ω–∞
Userbot –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞, –ø–æ—ç—Ç–æ–º—É –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–º—ã—Ö –∫–∞–Ω–∞–ª–æ–≤.

### –†–µ—à–µ–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ userbot –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `main()`:
```python
# –ó–∞–ø—É—Å–∫–∞–µ–º userbot –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
if USERBOT_ENABLED:
    async def start_userbot_task():
        try:
            await start_userbot()
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ userbot: {e}")
    
    loop = asyncio.get_event_loop()
    loop.create_task(start_userbot_task())
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `bot.py` - —Ñ—É–Ω–∫—Ü–∏—è `main()`

---

## –ü—Ä–æ–±–ª–µ–º–∞: Userbot –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É –±–æ—Ç—É

### –ü—Ä–∏—á–∏–Ω–∞
Userbot –∑–∞–ø—É—Å–∫–∞–ª—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –∑–∞–¥–∞—á–µ –∏ –Ω–µ –∏–º–µ–ª –¥–æ—Å—Ç—É–ø–∞ –∫ `bot.application`, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–µ "Application –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ bot –º–æ–¥—É–ª–µ –¥–ª—è –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏–∏".

### –†–µ—à–µ–Ω–∏–µ
1. **–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `main_bot`** –≤ –∫–ª–∞—Å—Å UserBot –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞
2. **–°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `set_main_bot()`** –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –±–æ—Ç–∞
3. **–û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏** `process_message` –∏ `send_notification_to_user` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `self.main_bot`
4. **–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `start_userbot()`** –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –±–æ—Ç–∞
5. **–û–±–Ω–æ–≤–ª–µ–Ω –∑–∞–ø—É—Å–∫ –≤ `bot.py`** –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ `application.bot` –≤ userbot

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `userbot.py` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ main_bot –∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏
- `bot.py` - –æ–±–Ω–æ–≤–ª–µ–Ω –∑–∞–ø—É—Å–∫ userbot —Å –ø–µ—Ä–µ–¥–∞—á–µ–π —Å—Å—ã–ª–∫–∏ –Ω–∞ –±–æ—Ç–∞

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

1. **–û—Ü–µ–Ω–∫–∞ –≤–∞–∂–Ω–æ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–π** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å AI (GigaChat) –∏ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∞–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –æ—á–µ—Ä–µ–¥—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤** - –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –≤–∞–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è userbot** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ userbot** - –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞

### üìä –¢–µ—Å—Ç–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- **–í—ã—Å–æ–∫–∞—è –≤–∞–∂–Ω–æ—Å—Ç—å** (1.00): "–°–†–û–ß–ù–û! –í–∞–∂–Ω–∞—è –≤—Å—Ç—Ä–µ—á–∞ –∑–∞–≤—Ç—Ä–∞ –≤ 10:00!"
- **–ù–∏–∑–∫–∞—è –≤–∞–∂–Ω–æ—Å—Ç—å** (0.40): "–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º! –ö–∞–∫ –¥–µ–ª–∞?"
- **–°—Ä–µ–¥–Ω—è—è –≤–∞–∂–Ω–æ—Å—Ç—å** (1.00): "–î–µ–¥–ª–∞–π–Ω –ø—Ä–æ–µ–∫—Ç–∞ - –ø—è—Ç–Ω–∏—Ü–∞"
- **–°–ø–∞–º** (0.10): "–†–µ–∫–ª–∞–º–∞: –∫—É–ø–∏—Ç–µ –Ω–∞—à –ø—Ä–æ–¥—É–∫—Ç"

### üéØ –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å:
‚úÖ –°—Å—ã–ª–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª—ã —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏  
‚úÖ Callback –∑–∞–ø—Ä–æ—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –æ—à–∏–±–æ–∫  
‚úÖ Userbot –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ª—é–±—ã–º–∏ –¥–∞—Ç–∞–º–∏  
‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è  
‚úÖ Userbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è  
‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏ –≤–∞–∂–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∞–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç  
‚úÖ –û—á–µ—Ä–µ–¥—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ